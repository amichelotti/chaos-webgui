<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
    <script src="//code.jquery.com/jquery-2.1.3.min.js"></script>
    <script src="js/json-viewer/jquery.json-viewer.js"></script>
    <script src="../webChaos/jchaos.js"></script>
    
    <script src="js/plotly-latest.min.js"></script>
    <link href="js/json-viewer/jquery.json-viewer.css" type="text/css" rel="stylesheet" />
       

    <style type="text/css">
body {
  margin: 0 100px;
  font-family: sans-serif;
}
textarea#json-input {
  width: 100%;
  height: 200px;
}
pre#json-renderer {
  border: 1px solid #aaa;
  padding: 0.5em 1.5em;
}
    </style>
        <script>
        $(document).ready(function() {
        var query = window.location.search.substring(1);
        var vars = query.split("=");
        var cus_names = vars[1].split("&");
        var running=true;
        var intervalListener;
        var options = {
        	      collapsed: false,
        	      withQuotes: true
        	    };
		function update(){
			jchaos.getChannel(cus_names,-1,function(data){
				$('#json-renderer').jsonViewer(data,options);
			});
		}
		
		 $('#btn-json-viewer').click(function() {
			  running=!running;
			  if(running){
				  intervalListener=setInterval(update, 1000);

				  $('#btn-json-viewer').text('Pause');
			  } else {
				  $('#btn-json-viewer').text('Run');
					clearInterval(intervalListener);

			  }
			  
			  });
		 $('#gethistory').click(function() {
			 var start=$('#input-start').val();
			 var stop=$('#input-stop').val();
				jchaos.getHistory(cus_names,0,start,stop,100,"",0,function(data){
					console.log("carico :"+data);
				});

		 })
		 intervalListener=setInterval(update, 1000);
		// $('#btn-json-viewer').click();
        });
        </script>
        <body>
        	<div id="history" style="width:600px;height:250px;"></div>
            <button id="btn-json-viewer" title=Pause>Pause</button>
            <input id="input-start"> Start</input>
             <input id="input-stop"> Stop</input>
            
            <button id="gethistory" title=His>History</button>
            
            <pre id="json-renderer"></pre>
        
        </body>
</html>
